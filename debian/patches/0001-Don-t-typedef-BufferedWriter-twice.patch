From 2eddb8328ba25698bccdedb90fb1871d2e6eefe2 Mon Sep 17 00:00:00 2001
From: Olivier Mehani <olivier.mehani@nicta.com.au>
Date: Fri, 4 Apr 2014 17:50:15 +1100
Subject: [PATCH] Don't typedef BufferedWriter twice

It upset older compilers

Signed-off-by: Olivier Mehani <olivier.mehani@nicta.com.au>

Conflicts:
	lib/client/buffered_writer.h
---
 lib/client/buffered_writer.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/client/buffered_writer.c b/lib/client/buffered_writer.c
index f794941..f4d9e07 100644
--- a/lib/client/buffered_writer.c
+++ b/lib/client/buffered_writer.c
@@ -48,7 +48,7 @@ typedef struct BufferChunk {
 } BufferChunk;
 
 /** A writer reading from a chain of BufferChunks */
-typedef struct BufferedWriter {
+struct BufferedWriter {
   /** Set to !0 if buffer is active; 0 kills the thread */
   int  active;
 
@@ -86,7 +86,7 @@ typedef struct BufferedWriter {
 
   int nlost; /**< Number of lost messages since last query */
 
-} BufferedWriter;
+};
 #define REATTEMP_INTERVAL 5    //! Seconds to open the stream again
 
 static BufferChunk* getNextWriteChunk(BufferedWriter* self, BufferChunk* current);
-- 
1.9.2

